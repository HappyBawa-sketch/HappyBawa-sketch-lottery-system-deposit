<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rajshree Punjab Lottery</title>
    <!-- Use Tailwind CSS for rapid styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #333;
        }
        .header-bg {
            background-color: #2b2b2b;
        }
        .tab-button.active {
            background-color: #008cba;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .draw-box {
            background: linear-gradient(to bottom, #444, #2b2b2b);
            border: 2px solid #555;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .draw-number {
            background-color: #f7d247;
            color: #333;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        .table-header {
            background-color: #444;
        }
        .table-row {
            border-bottom: 1px solid #444;
        }
        .table-row:nth-child(even) {
            background-color: #444;
        }
        .table-row:nth-child(odd) {
            background-color: #333;
        }
        .password-modal {
            display: none; /* Initially hidden */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            justify-content: center;
            align-items: center;
        }
        .password-content {
            background-color: #2b2b2b;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            max-width: 90%;
            width: 320px;
        }
        .admin-input {
            width: 100%;
            text-align: center;
            background-color: transparent;
            border: 1px solid #555;
            padding: 4px;
            border-radius: 4px;
            color: white;
        }
    </style>
</head>
<body class="text-white">

    <!-- Top Navigation Bar -->
    <header class="header-bg py-4 px-4 flex justify-between items-center text-lg">
        <div class="flex items-center space-x-2">
            <a href="#" class="text-white"><i class="fas fa-arrow-left"></i></a>
            <span class="font-bold">Rajlaxmi lotteries</span>
        </div>
        <div class="flex items-center space-x-4">
            <span class="text-gray-400 text-sm">lottery.blogspot.com</span>
            <div class="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center">2</div>
            <a href="#" class="text-white"><i class="fas fa-ellipsis-v"></i></a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="p-4">
        <div class="flex justify-between items-center mb-4">
            <span class="text-gray-400 text-sm">August 22, 2025</span>
            <a href="#" class="text-gray-400"><i class="fas fa-share-alt"></i></a>
        </div>

        <h1 class="text-2xl font-bold mb-4 text-center">Rajshree Punjab Lottery</h1>

        <!-- Tab Buttons -->
        <div class="flex justify-center mb-6 rounded-lg bg-gray-500 p-1">
            <button id="live-tab" class="tab-button active px-4 py-2 rounded-lg text-sm font-semibold w-1/3">Live</button>
            <button id="history-tab" class="tab-button px-4 py-2 rounded-lg text-sm font-semibold w-1/3">History</button>
            <button id="admin-tab" class="tab-button px-4 py-2 rounded-lg text-sm font-semibold w-1/3">Admin</button>
        </div>

        <!-- Live Draw Section -->
        <div id="live-section">
            <p class="text-center text-gray-400 text-sm mb-2">15-Minute Draws - Live Results (9 AM - 9 PM)</p>
            <p id="draw-date" class="text-center text-gray-400 text-sm mb-4">22/08/2025, 19:44:19</p>

            <div class="draw-box rounded-lg p-4 mb-6 relative">
                <span id="next-draw-time" class="absolute top-2 right-2 text-xs text-gray-400">Next: 19:45</span>
                <div id="countdown" class="text-center font-bold text-4xl mb-4 text-orange-400">00:00</div>
                <div class="flex justify-around items-center space-x-2">
                    <div class="text-center">
                        <span class="block text-sm font-bold text-white mb-2">A</span>
                        <div id="draw-a" class="draw-number w-16 h-16 rounded-lg flex items-center justify-center font-bold text-3xl">--</div>
                    </div>
                    <div class="text-center">
                        <span class="block text-sm font-bold text-white mb-2">B</span>
                        <div id="draw-b" class="draw-number w-16 h-16 rounded-lg flex items-center justify-center font-bold text-3xl">--</div>
                    </div>
                    <div class="text-center">
                        <span class="block text-sm font-bold text-white mb-2">C</span>
                        <div id="draw-c" class="draw-number w-16 h-16 rounded-lg flex items-center justify-center font-bold text-3xl">--</div>
                    </div>
                </div>
            </div>

            <!-- History Table -->
            <div class="bg-gray-700 rounded-lg overflow-hidden">
                <table class="w-full text-center text-sm">
                    <thead>
                        <tr class="table-header">
                            <th class="p-2 font-semibold">Time</th>
                            <th class="p-2 font-semibold">A</th>
                            <th class="p-2 font-semibold">B</th>
                            <th class="p-2 font-semibold">C</th>
                        </tr>
                    </thead>
                    <tbody id="live-history-body">
                        <!-- History rows will be generated here by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- History Section -->
        <div id="history-section" class="hidden">
            <div class="bg-gray-700 rounded-lg overflow-hidden">
                <table class="w-full text-center text-sm">
                    <thead>
                        <tr class="table-header">
                            <th class="p-2 font-semibold">Time</th>
                            <th class="p-2 font-semibold">A</th>
                            <th class="p-2 font-semibold">B</th>
                            <th class="p-2 font-semibold">C</th>
                        </tr>
                    </thead>
                    <tbody id="full-history-body">
                        <!-- History rows will be generated here by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Admin Section (Now an editable table) -->
        <div id="admin-section" class="hidden">
            <div class="bg-gray-700 p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-bold mb-4 text-center">Admin Panel (Edit Draws)</h2>
                <p id="admin-message" class="text-center text-sm mt-2 mb-4 hidden"></p>
                <div class="bg-gray-800 rounded-lg overflow-y-scroll max-h-[500px]">
                    <table class="w-full text-center text-sm">
                        <thead>
                            <tr class="table-header sticky top-0">
                                <th class="p-2 font-semibold">Time</th>
                                <th class="p-2 font-semibold">A</th>
                                <th class="p-2 font-semibold">B</th>
                                <th class="p-2 font-semibold">C</th>
                            </tr>
                        </thead>
                        <tbody id="admin-table-body">
                            <!-- Draw data will be pre-filled here -->
                        </tbody>
                    </table>
                </div>
                <button id="save-draws" class="w-full mt-4 px-4 py-3 bg-blue-500 text-white font-semibold rounded-md hover:bg-blue-600 transition-colors duration-200">
                    Save All Changes
                </button>
            </div>
        </div>
    </main>
    
    <!-- Password Modal -->
    <div id="password-modal" class="password-modal">
        <div class="password-content">
            <h2 class="text-xl font-bold mb-4 text-center">Enter Password</h2>
            <input type="password" id="password-input" class="w-full p-3 rounded-md bg-gray-800 text-white placeholder-gray-500 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4" placeholder="Password">
            <button id="password-submit" class="w-full px-4 py-3 bg-green-500 text-white font-semibold rounded-md hover:bg-green-600 transition-colors duration-200">
                Submit
            </button>
            <p id="password-error" class="text-red-400 text-center mt-2 hidden">Incorrect password. Please try again.</p>
        </div>
    </div>

    <!-- Font Awesome for icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM ELEMENTS ---
            const liveSection = document.getElementById('live-section');
            const historySection = document.getElementById('history-section');
            const adminSection = document.getElementById('admin-section');
            const tabs = document.querySelectorAll('.tab-button');
            const liveHistoryBody = document.getElementById('live-history-body');
            const fullHistoryBody = document.getElementById('full-history-body');
            const adminTableBody = document.getElementById('admin-table-body');
            const countdownEl = document.getElementById('countdown');
            const drawAEl = document.getElementById('draw-a');
            const drawBEl = document.getElementById('draw-b');
            const drawCEl = document.getElementById('draw-c');
            const nextDrawTimeEl = document.getElementById('next-draw-time');
            const drawDateEl = document.getElementById('draw-date');
            const saveDrawsButton = document.getElementById('save-draws');
            const adminMessageEl = document.getElementById('admin-message');

            // --- PASSWORD MODAL ELEMENTS ---
            const passwordModal = document.getElementById('password-modal');
            const passwordInput = document.getElementById('password-input');
            const passwordSubmit = document.getElementById('password-submit');
            const passwordError = document.getElementById('password-error');
            const correctPassword = 'lottoditto';

            // --- DATA STORE ---
            let allDrawsForDay = [];

            // --- FUNCTIONS ---
            /**
             * Generates a full day's worth of lottery draws.
             * Creates a schedule from 9:00 AM to 9:00 PM, every 15 minutes.
             */
            function generateDailyDraws() {
                const now = new Date();
                const startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0); // Start at 9:00 AM
                const endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 21, 0, 0); // End at 9:00 PM
                const draws = [];

                let currentTime = startDate;
                while (currentTime.getTime() <= endDate.getTime()) {
                    // Create a draw object with time and random numbers
                    const drawTime = `${String(currentTime.getHours()).padStart(2, '0')}:${String(currentTime.getMinutes()).padStart(2, '0')}`;
                    draws.push({
                        time: drawTime,
                        a: Math.floor(Math.random() * 100),
                        b: Math.floor(Math.random() * 100),
                        c: Math.floor(Math.random() * 100),
                        timestamp: new Date(currentTime)
                    });
                    // Move to the next 15-minute interval
                    currentTime.setMinutes(currentTime.getMinutes() + 15);
                }
                allDrawsForDay = draws;
            }

            /**
             * Renders a history table with the given data and target body.
             * @param {Array<Object>} draws - The array of draw objects to display.
             * @param {HTMLElement} targetBody - The tbody element to render the rows into.
             */
            function renderHistoryTable(draws, targetBody) {
                targetBody.innerHTML = ''; // Clear existing rows
                draws.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.className = 'table-row';
                    tr.innerHTML = `
                        <td class="p-2">${row.time}</td>
                        <td class="p-2">${String(row.a).padStart(2, '0')}</td>
                        <td class="p-2">${String(row.b).padStart(2, '0')}</td>
                        <td class="p-2">${String(row.c).padStart(2, '0')}</td>
                    `;
                    targetBody.appendChild(tr);
                });
            }

            /**
             * Renders the admin table with editable input fields.
             */
            function renderAdminTable() {
                adminTableBody.innerHTML = ''; // Clear existing rows
                allDrawsForDay.forEach((row, index) => {
                    const tr = document.createElement('tr');
                    tr.className = 'table-row';
                    tr.innerHTML = `
                        <td class="p-2">${row.time}</td>
                        <td class="p-2"><input type="number" data-index="${index}" data-key="a" value="${row.a}" class="admin-input"></td>
                        <td class="p-2"><input type="number" data-index="${index}" data-key="b" value="${row.b}" class="admin-input"></td>
                        <td class="p-2"><input type="number" data-index="${index}" data-key="c" value="${row.c}" class="admin-input"></td>
                    `;
                    adminTableBody.appendChild(tr);
                });
            }

            /**
             * Saves the changes from the admin table back into the data array.
             */
            function saveAdminChanges() {
                const inputs = adminTableBody.querySelectorAll('input');
                inputs.forEach(input => {
                    const index = input.getAttribute('data-index');
                    const key = input.getAttribute('data-key');
                    allDrawsForDay[index][key] = parseInt(input.value);
                });
                
                // Show a success message
                adminMessageEl.textContent = 'Changes saved successfully!';
                adminMessageEl.classList.remove('hidden', 'text-red-500');
                adminMessageEl.classList.add('text-green-500');
                
                // Re-render other sections to show the new data
                updateLiveDraw();
                renderHistoryTable(allDrawsForDay.slice().reverse(), fullHistoryBody);
            }

            /**
             * Updates the live draw section and countdown.
             * Finds the current and next draws based on the system time.
             */
            function updateLiveDraw() {
                const now = new Date();
                drawDateEl.textContent = `${now.toLocaleDateString()}, ${now.toLocaleTimeString()}`;

                const currentDraw = allDrawsForDay.slice().reverse().find(draw => draw.timestamp.getTime() <= now.getTime());
                const nextDraw = allDrawsForDay.find(draw => draw.timestamp.getTime() > now.getTime());

                if (currentDraw) {
                    drawAEl.textContent = String(currentDraw.a).padStart(2, '0');
                    drawBEl.textContent = String(currentDraw.b).padStart(2, '0');
                    drawCEl.textContent = String(currentDraw.c).padStart(2, '0');
                } else {
                    drawAEl.textContent = '--';
                    drawBEl.textContent = '--';
                    drawCEl.textContent = '--';
                }

                if (nextDraw) {
                    const timeLeft = nextDraw.timestamp.getTime() - now.getTime();
                    const totalSeconds = Math.floor(timeLeft / 1000);
                    const minutes = Math.floor(totalSeconds / 60);
                    const seconds = totalSeconds % 60;
                    countdownEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    nextDrawTimeEl.textContent = `Next: ${nextDraw.time}`;
                } else {
                    countdownEl.textContent = 'CLOSED';
                    nextDrawTimeEl.textContent = 'Next: --:--';
                }

                const historyUpToNow = allDrawsForDay.filter(draw => draw.timestamp.getTime() <= now.getTime()).reverse();
                renderHistoryTable(historyUpToNow, liveHistoryBody);
            }

            /**
             * Handles tab clicks, showing the correct section and rendering data.
             */
            function handleTabClick(event) {
                tabs.forEach(tab => {
                    tab.classList.remove('active', 'bg-blue-500', 'text-white');
                    tab.classList.add('bg-gray-200', 'text-gray-700');
                });
                
                event.target.classList.add('active', 'bg-blue-500', 'text-white');
                event.target.classList.remove('bg-gray-200', 'text-gray-700');
                
                liveSection.classList.add('hidden');
                historySection.classList.add('hidden');
                adminSection.classList.add('hidden');

                if (event.target.id === 'admin-tab') {
                    passwordModal.style.display = 'flex';
                    passwordInput.value = '';
                    passwordInput.focus();
                } else if (event.target.id === 'live-tab') {
                    liveSection.classList.remove('hidden');
                    updateLiveDraw();
                } else if (event.target.id === 'history-tab') {
                    historySection.classList.remove('hidden');
                    renderHistoryTable(allDrawsForDay.slice().reverse(), fullHistoryBody);
                }
            }
            
            /**
             * Handles password submission for the admin panel.
             */
            function handlePasswordSubmit() {
                if (passwordInput.value === correctPassword) {
                    passwordModal.style.display = 'none';
                    adminSection.classList.remove('hidden');
                    passwordError.classList.add('hidden');
                    renderAdminTable(); // Render the editable table
                } else {
                    passwordError.classList.remove('hidden');
                }
            }

            // --- EVENT LISTENERS ---
            tabs.forEach(tab => tab.addEventListener('click', handleTabClick));
            passwordSubmit.addEventListener('click', handlePasswordSubmit);
            passwordInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    handlePasswordSubmit();
                }
            });
            saveDrawsButton.addEventListener('click', saveAdminChanges);

            // --- INITIALIZATION ---
            generateDailyDraws();
            updateLiveDraw();
            setInterval(updateLiveDraw, 1000); // Update every second
        });
    </script>
</body>
</html>
